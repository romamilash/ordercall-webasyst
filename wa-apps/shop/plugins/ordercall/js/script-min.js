function showModalForm(){document.getElementById("orderCallForm").style.display="block"}function closeModalForm(){document.getElementById("orderCallForm").style.display="none"}function showResultMessage(e=!0){let o=document.getElementById("resultModal");o.style.display="block",e?o.append("Спасибо! Наш менеджер с Вами свяжется!"):o.append("Произошла неизвестная ошибка. Попробуйте позднее."),setTimeout(()=>o.style.display="none",2e3)}function sendForm(){if(validateForm()){let e=document.querySelector("#orderCallForm form"),o=new FormData(e),t=new XMLHttpRequest;t.open("POST","/shop/send/",!1),t.send(o),closeModalForm(),200===t.status&&"error"!==t.responseText?showResultMessage(!0):showResultMessage(!1)}}function validateForm(){let e;if([...document.querySelectorAll(".order-call-form__fields input")].forEach(o=>{if(o.id){let t=document.querySelector(`label[for="${o.id}"]`).innerHTML;if(""===o.value&&(e=`Поле «${t}» должно быть заполнено.`),"email"===o.type){String(o.value).toLowerCase().match(/^(([^<>()[\]\.,;:\s@\"]+(\.[^<>()[\]\.,;:\s@\"]+)*)|(\".+\"))@(([^<>()[\]\.,;:\s@\"]+\.)+[^<>()[\]\.,;:\s@\"]{2,})$/i)||(e=`Поле «${t}» имеет недопустимый формат.`)}}}),e){let o=document.querySelector(".order-call-form__error");return o.innerHTML=e,o.style.marginBottom="20px",!1}{let e=document.querySelector(".order-call-form__error");return e.innerHTML="",e.style.marginBottom="0",!0}}window.onload=(()=>{const e=document.getElementById("orderCall"),o=document.getElementById("close_form"),t=document.querySelector("#orderCallForm button");e.addEventListener("click",e=>{e.preventDefault(),showModalForm()}),o.addEventListener("click",()=>{closeModalForm()}),o.addEventListener("click",()=>{closeModalForm()}),t.addEventListener("click",e=>{e.preventDefault(),sendForm()})});